<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>ReactMRP V1.0</title>
<style>
section {
	margin-bottom: 30px
}

section header {
	font-weight: bolder;
	padding-bottom: 10px;
}

.amount {
	width: 200px;
	text-align: right;
	border: 1px solid #aaa;
	background-color: #eee;
	padding: 3px 8px;
}

.msg {
	width: 80%;
	padding: 8px;
	margin-bottom: 20px;
}
</style>
<script src="/js/myserverless-4.0.js"></script>
</head>
<body>
 <script>
      var token=localStorage.getItem("token");
      if(token==null)
    	  window.location.href="/login.html";
      //todo: check server side token valid or expired
 </script>
    
	
    <h2>Backend service started.</h2>	   
	<div id="msgid" class="msg"></div>
	 
	<p id="Users">
	</p>
	 
	 
	 <script>
	  //data$getMyServJson返回的是异步方法的promise包装, 要用await或then来获取结果
	  data$qryMapList(`#PUBLIC select username from users where username like ? order by username`,"demo%").then(users=>{
				  var html="User List:<br/>";
				  for(var i=0;i<users.length;i++) 
					  html+="username:" +  users[i].username+"<br/>"; 
				  document.getElementById("Users").innerHTML=html;
			  });
	</script>
</body>
</html>