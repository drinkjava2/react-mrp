<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>ReactMRP V1.0</title>
<style>
section {
	margin-bottom: 30px
}

section header {
	font-weight: bolder;
	padding-bottom: 10px;
}

.amount {
	width: 200px;
	text-align: right;
	border: 1px solid #aaa;
	background-color: #eee;
	padding: 3px 8px;
}

.msg {
	width: 80%;
	padding: 8px;
	margin-bottom: 20px;
}
</style>
<script src="/js/jquery-1.11.3.min.js"></script>
<script src="/js/jquery-ajax-ext.js"></script>
<script src="/js/myserverless-3.0.js"></script>
</head>
<body>
 <script>
      var token=localStorage.getItem("token");
      if(token==null)
    	  window.location.href="/login.html";
      //todo: check server side token valid or expired
      
      /* 调用异步方法或者用async/await, 或者用promise.then
	  async function getUserListHtml(){
		  var users=await data$qryMapList(`#PUBLIC select * from users order by username`);
		  var html="User List:<br/>";
		  for(var i=0;i<users.length;i++) 
			  html+="username:" +  users[i].username+", password:"+ users[i].password+", token:"+ users[i].token+"<br/>"; 
		  document.getElementById("Users").innerHTML=html;
	  }
      */
 </script>
    
	
    <h2>Backend service started.</h2>	   
	<div id="msgid" class="msg"></div>
	 
	<p id="Users">
	</p>
	 
	 
	  <script>
	  data$qryMapList(`#PUBLIC select * from users order by username`).then(users=>{
				  var html="User List:<br/>";
				  for(var i=0;i<users.length;i++) 
					  html+="username:" +  users[i].username+", password:"+ users[i].password+", token:"+ users[i].token+"<br/>"; 
				  document.getElementById("Users").innerHTML=html;
			  });
	</script>
</body>
</html>